<!-- <h1>
  NgxCSVParser by <a href="https://DevelopersHive.com">Developers Hive</a>
</h1> -->
<div class="csv-file-chooser-section">
  <input
    type="file"
    #fileImportInput
    name="File Upload"
    id="csvFileUpload"
    (change)="fileChangeListener($event)"
    accept=".csv"
  />

  <button *ngIf="csvRecords.length>0" type="button" class="btn btn-primary" (click)="sendMessagesCsv(csvRecords)">Enviar Mensajes
    <span class="badge badge-light">{{csvRecords.length}}</span>
  </button>

  
  
  <!-- <label> Parse Headers? </label>
    <select aria-placeholder="Parse headers?" [(ngModel)]="header">
      <option [value]="true">Yes</option>
      <option [value]="false">No</option>
    </select> -->
  </div>

  <div class="mb-2" *ngIf="csvRecords.length>0">
   
    <form (submit)="filterForItems(num_doc_usr,apellido1,apellido2,especialidad,profesional)" #forma="ngForm">
        <input
        type="text"
        [ngModelOptions]="{ standalone: true }"
        name="num_doc_usr"
        [(ngModel)]="num_doc_usr"
        placeholder="documento"
      />
        <input
        type="text"
        [ngModelOptions]="{ standalone: true }"
        name="apellido1"
        [(ngModel)]="apellido1"
        placeholder="apellido 1"
      />
      <input
        type="text"
        [ngModelOptions]="{ standalone: true }"
        name="apellido2"
        [(ngModel)]="apellido2"
        placeholder="apellido 2"
      />
      <input
        type="text"
        [ngModelOptions]="{ standalone: true }"
        name="especialidad"
        [(ngModel)]="especialidad"
        placeholder="especialidad"
      />
      <input
        type="text"
        [ngModelOptions]="{ standalone: true }"
        name="profesional"
        [(ngModel)]="profesional"
        placeholder="profesional"
      />

      <button data-toggle="modal" data-target="#exampleModal">Filtrar</button>
    </form>

    <div *ngIf="sinCoincidencia" class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Advertencia !!</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true" (click)="sinCoincidencia=false">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            No se encontraron coincidencia
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="sinCoincidencia=false">cerrar</button>
          </div>
        </div>
      </div>
    </div>

  </div>
<div *ngIf="csvRecords.length>0">
  <table class="table table-sm">
    <thead class="thead-dark">
      <tr>
        
        <th>id</th>
        <th>Documento</th>
        <th>Apellido 1</th>
        <th>Apellido 2</th>
        <th>nombre 1</th>
        <th>nombre 2</th>
        <th>Celular</th>
        <th>Fecha cita</th>
        <th>Especialidad</th>
        <th>Profesional</th>
        <th>Descripcion</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="
          let csvData of csvRecords | slice: starIndex:endIndex;
          let i = index
        "
      >
        
        <td>
          <span>{{ csvData.id }}</span>
        </td>
        <td>
          <span>{{ csvData.num_doc_usr }}</span>
        </td>
        <td>
          <span>{{ csvData.apellido1 }}</span>
        </td>
        <td>
          <span>{{ csvData.apellido2 }}</span>
        </td>
        <td>
          <span>{{ csvData.nombre1 }}</span>
        </td>
        <td>
          <span>{{ csvData.nombre2 }}</span>
        </td>
        <td>
          <span>{{ csvData.celular }}</span>
        </td>
        <td>
          <span>{{ csvData.fec_hora_cita }}</span>
        </td>
        <td>
          <span>{{ csvData.especialidad }}</span>
        </td>
        <td>
          <span>{{ csvData.profesional }}</span>
        </td>
        <td>
          <span>{{ csvData.descripcion }}</span>
        </td>
        <td>            
            <!-- <button type="button" class="btn btn-danger" (click)="eliminarItem(csvData)"></button> -->
            <i class="fas fa-trash-alt fa-lg logo-red" (click)="eliminarItem(csvData)"></i>
        </td>
        
      </tr>
    </tbody>
  </table>

  <nav aria-label="Page navigation example">
    <ul class="pagination">
      <li class="page-item">
        <a class="page-link" href="#" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      <li
        *ngFor="
          let item of getArrayFromNumber(csvRecords.length);
          let i = index
        "
        class="page-item"
      >
        <a class="page-link" (click)="updateIndex(i)">{{ i + 1 }}</a>
      </li>

      <li class="page-item">
        <a class="page-link" href="#" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    </ul>
  </nav>
</div>
